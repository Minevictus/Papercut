From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Mariell Hoversholm <proximyst@proximyst.com>
Date: Thu, 28 May 2020 10:43:25 +0200
Subject: [PATCH] Raw methods


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
index 6bd0984881fdd35e32aceeab884d5076bbc83ee5..6c5114dae8caf227ae0fee2d89612f1e1f68b995 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
@@ -1069,4 +1069,22 @@ public abstract class CraftEntity implements org.bukkit.entity.Entity {
         return getHandle().spawnReason;
     }
     // Paper end
+
+    // Papercut start
+    @Override
+    public void rawRotate(float yaw, float pitch) {
+        getHandle().yaw = yaw;
+        getHandle().pitch = pitch;
+    }
+
+    @Override
+    public void setRawInvisible(boolean visibility) {
+        getHandle().setInvisible(visibility);
+    }
+
+    @Override
+    public void setRawInvulnerable(boolean invulnerability) {
+        getHandle().setInvulnerable(invulnerability);
+    }
+    // Papercut end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java
index a461ac36144361b712e015b722e68bdb0b43dfb2..c74346b585776d03c8229f40ec9cd70eb4b973b0 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftLivingEntity.java
@@ -739,4 +739,13 @@ public class CraftLivingEntity extends CraftEntity implements LivingEntity {
     }
 
     // Paper end
+
+    // Papercut start
+    @Override
+    public void rawRotate(float yaw, float pitch) {
+        rawRotateClamped(yaw, pitch);
+        getHandle().aK = getHandle().yaw;
+        getHandle().aL = getHandle().yaw;
+    }
+    // Papercut end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 25c1eda3a9cef2c8d1c485d903667abd5436f040..60653baf8979eaa0885dc17793df5617299c417b 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -2084,4 +2084,18 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
         return spigot;
     }
     // Spigot end
+
+    // Papercut start
+    @Override
+    public void rawUpdateClientPassengers() {
+        if (getHandle().playerConnection == null) return;
+        getHandle().playerConnection.sendPacket(new net.minecraft.server.PacketPlayOutMount(getHandle()));
+    }
+
+    @Override
+    public void rawDestroyEntity(org.bukkit.entity.Entity entity) {
+        if (getHandle().playerConnection == null) return;
+        getHandle().playerConnection.sendPacket(new net.minecraft.server.PacketPlayOutEntityDestroy(entity.getEntityId()));
+    }
+    // Papercut end
 }
